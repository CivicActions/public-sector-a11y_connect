<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Trait implemented by fairings: Rocket’s structured middleware."><meta name="keywords" content="rust, rustlang, rust-lang, Fairing"><title>Fairing in rocket::fairing - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-6d262342be62306e.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../../static.files/light-5f7299aa2b503fb1.css"><link rel="stylesheet" disabled href="../../static.files/dark-dfb18ef8114bb428.css"><link rel="stylesheet" disabled href="../../static.files/ayu-4047a6aaddd3789d.css"><script id="default-settings" ></script><script src="../../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-3367e395607fafc1.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="icon" href="https://rocket.rs/images/favicon.ico"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../rocket/index.html"><img src="https://rocket.rs/images/logo-boxed.png" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../rocket/index.html">
                <img src="https://rocket.rs/images/logo-boxed.png" alt="logo"></a><h2 class="location"><a href="#">Fairing</a></h2><div class="sidebar-elems"><section><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.info">info</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.on_ignite">on_ignite</a></li><li><a href="#method.on_liftoff">on_liftoff</a></li><li><a href="#method.on_request">on_request</a></li><li><a href="#method.on_response">on_response</a></li><li><a href="#method.on_shutdown">on_shutdown</a></li></ul><h3><a href="#foreign-impls">Implementations on Foreign Types</a></h3><ul class="block"><li><a href="#impl-Fairing-for-Arc%3CT%3E">Arc&lt;T&gt;</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In rocket::fairing</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="../index.html">rocket</a>::<wbr><a href="index.html">fairing</a>::<wbr><a class="trait" href="#">Fairing</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/rocket/fairing/mod.rs.html#428-534">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><div class="item-decl"><pre class="rust"><code>pub trait Fairing: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html" title="trait core::any::Any">Any</a> + 'static {
    fn <a href="#tymethod.info" class="fn">info</a>(&amp;self) -&gt; <a class="struct" href="struct.Info.html" title="struct rocket::fairing::Info">Info</a>;

    fn <a href="#method.on_ignite" class="fn">on_ignite</a>&lt;'life0, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rocket: <a class="struct" href="../struct.Rocket.html" title="struct rocket::Rocket">Rocket</a>&lt;<a class="enum" href="../enum.Build.html" title="enum rocket::Build">Build</a>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="type" href="type.Result.html" title="type rocket::fairing::Result">Result</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="where">where<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait</span>,
    { ... }
<span class="item-spacer"></span>    fn <a href="#method.on_liftoff" class="fn">on_liftoff</a>&lt;'life0, 'life1, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_rocket: &amp;'life1 <a class="struct" href="../struct.Rocket.html" title="struct rocket::Rocket">Rocket</a>&lt;<a class="enum" href="../enum.Orbit.html" title="enum rocket::Orbit">Orbit</a>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="where">where<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life1: 'async_trait</span>,
    { ... }
<span class="item-spacer"></span>    fn <a href="#method.on_request" class="fn">on_request</a>&lt;'life0, 'life1, 'life2, 'life3, 'life4, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_req: &amp;'life1 mut <a class="struct" href="../request/struct.Request.html" title="struct rocket::request::Request">Request</a>&lt;'life2&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_data: &amp;'life3 mut <a class="struct" href="../data/struct.Data.html" title="struct rocket::data::Data">Data</a>&lt;'life4&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="where">where<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life1: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life2: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life3: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life4: 'async_trait</span>,
    { ... }
<span class="item-spacer"></span>    fn <a href="#method.on_response" class="fn">on_response</a>&lt;'r, 'life0, 'life1, 'life2, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_req: &amp;'r <a class="struct" href="../request/struct.Request.html" title="struct rocket::request::Request">Request</a>&lt;'life1&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_res: &amp;'life2 mut <a class="struct" href="../response/struct.Response.html" title="struct rocket::response::Response">Response</a>&lt;'r&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="where">where<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'r: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life1: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life2: 'async_trait</span>,
    { ... }
<span class="item-spacer"></span>    fn <a href="#method.on_shutdown" class="fn">on_shutdown</a>&lt;'life0, 'life1, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_rocket: &amp;'life1 <a class="struct" href="../struct.Rocket.html" title="struct rocket::Rocket">Rocket</a>&lt;<a class="enum" href="../enum.Orbit.html" title="enum rocket::Orbit">Orbit</a>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="where">where<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life1: 'async_trait</span>,
    { ... }
}</code></pre></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Trait implemented by fairings: Rocket’s structured middleware.</p>
<h2 id="considerations"><a href="#considerations">Considerations</a></h2>
<p>Fairings are a large hammer that can easily be abused and misused. If you
are considering writing a <code>Fairing</code> implementation, first consider if it is
appropriate to do so. While middleware is often the best solution to some
problems in other frameworks, it is often a suboptimal solution in Rocket.
This is because Rocket provides richer mechanisms such as <a href="../request/trait.FromRequest.html">request guards</a>
and <a href="../data/trait.FromData.html">data guards</a> that can be used to accomplish the same objective in a
cleaner, more composable, and more robust manner.</p>
<p>As a general rule of thumb, only <em>globally applicable actions</em> should be
implemented via fairings. For instance, you should <em>not</em> use a fairing to
implement authentication or authorization (preferring to use a <a href="../request/trait.FromRequest.html">request
guard</a> instead) <em>unless</em> the authentication or authorization applies to the
entire application. On the other hand, you <em>should</em> use a fairing to record
timing and/or usage statistics or to implement global security policies.</p>
<h3 id="fairing-callbacks"><a href="#fairing-callbacks">Fairing Callbacks</a></h3>
<p>There are five kinds of fairing callbacks: launch, liftoff, request,
response, and shutdown. A fairing can request any combination of these
callbacks through the <code>kind</code> field of the <a href="trait.Fairing.html#tymethod.info"><code>Info</code></a> structure returned from
the <code>info</code> method. Rocket will only invoke the callbacks identified in the
fairing’s <a href="struct.Kind.html" title="Kind"><code>Kind</code></a>.</p>
<p>The callback kinds are as follows:</p>
<ul>
<li>
<p><strong><a name="ignite">Ignite</a> (<code>on_ignite</code>)</strong></p>
<p>An ignite callback, represented by the <a href="trait.Fairing.html#method.on_ignite" title="Fairing::on_ignite()"><code>Fairing::on_ignite()</code></a> method,
is called just prior to liftoff, during ignition. The state of the
<code>Rocket</code> instance is, at this point, not finalized, as it may be
modified at will by other ignite fairings.</p>
<p>All ignite callbacks are executed in breadth-first <code>attach()</code> order. A
callback <code>B</code> executing after a callback <code>A</code> can view changes made by <code>A</code>
but not vice-versa.</p>
<p>An ignite callback can arbitrarily modify the <code>Rocket</code> instance being
constructed. It should take care not to introduce infinite recursion by
recursively attaching ignite fairings. It returns <code>Ok</code> if it would like
ignition and launch to proceed nominally and <code>Err</code> otherwise. If an
ignite fairing returns <code>Err</code>, launch will be aborted. All ignite
fairings are executed even if one or more signal a failure.</p>
</li>
<li>
<p><strong><a name="liftoff">Liftoff</a> (<code>on_liftoff</code>)</strong></p>
<p>A liftoff callback, represented by the <a href="trait.Fairing.html#method.on_liftoff" title="Fairing::on_liftoff()"><code>Fairing::on_liftoff()</code></a> method,
is called immediately after a Rocket application has launched. At this
point, Rocket has opened a socket for listening but has not yet begun
accepting connections. A liftoff callback can inspect the <code>Rocket</code>
instance that has launched and even schedule a shutdown using
<a href="../struct.Shutdown.html#method.notify"><code>Shutdown::notify()</code></a> via
<a href="../struct.Rocket.html#method.shutdown" title="Rocket::shutdown()"><code>Rocket::shutdown()</code></a>.</p>
<p>Liftoff fairings are run concurrently; resolution of all fairings is
awaited before resuming request serving.</p>
</li>
<li>
<p><strong><a name="request">Request</a> (<code>on_request</code>)</strong></p>
<p>A request callback, represented by the <a href="trait.Fairing.html#method.on_request" title="Fairing::on_request()"><code>Fairing::on_request()</code></a> method,
is called just after a request is received, immediately after
pre-processing the request with method changes due to <code>_method</code> form
fields. At this point, Rocket has parsed the incoming HTTP request into
<a href="../request/struct.Request.html" title="Request"><code>Request</code></a> and <a href="../data/struct.Data.html" title="Data"><code>Data</code></a> structures but has not routed the request. A
request callback can modify the request at will and <a href="../data/struct.Data.html#method.peek" title="Data::peek()"><code>Data::peek()</code></a>
into the incoming data. It may not, however, abort or respond directly
to the request; these issues are better handled via <a href="../request/trait.FromRequest.html">request guards</a> or
via response callbacks. Any modifications to a request are persisted and
can potentially alter how a request is routed.</p>
</li>
<li>
<p><strong><a name="response">Response</a> (<code>on_response</code>)</strong></p>
<p>A response callback, represented by the <a href="trait.Fairing.html#method.on_response" title="Fairing::on_response()"><code>Fairing::on_response()</code></a>
method, is called when a response is ready to be sent to the client. At
this point, Rocket has completed all routing, including to error
catchers, and has generated the would-be final response. A response
callback can modify the response at will. For example, a response
callback can provide a default response when the user fails to handle
the request by checking for 404 responses. Note that a given <code>Request</code>
may have changed between <code>on_request</code> and <code>on_response</code> invocations.
Apart from any change made by other fairings, Rocket sets the method for
<code>HEAD</code> requests to <code>GET</code> if there is no matching <code>HEAD</code> handler for that
request. Additionally, Rocket will automatically strip the body for
<code>HEAD</code> requests <em>after</em> response fairings have run.</p>
</li>
<li>
<p><strong><a name="shutdown">Shutdown</a> (<code>on_shutdown</code>)</strong></p>
<p>A shutdown callback, represented by the <a href="trait.Fairing.html#method.on_shutdown" title="Fairing::on_shutdown()"><code>Fairing::on_shutdown()</code></a>
method, is called when <a href="../config/struct.Shutdown.html#triggers">shutdown is triggered</a>. At this point, graceful
shutdown has commenced but not completed; no new requests are accepted
but the application may still be actively serving existing requests.</p>
<p>Rocket guarantees, however, that all requests are completed or aborted
once <a href="../config/struct.Shutdown.html#summary">grace and mercy periods</a> have expired. This implies that a
shutdown fairing that (asynchronously) sleeps for <code>grace + mercy + ε</code>
seconds before executing any logic will execute said logic after all
requests have been processed or aborted. Note that such fairings may
wish to operate using the <code>Ok</code> return value of <a href="../struct.Rocket.html#method.launch" title="Rocket::launch()"><code>Rocket::launch()</code></a>
instead.</p>
<p>All registered shutdown fairings are run concurrently; resolution of all
fairings is awaited before resuming shutdown. Shutdown fairings do not
affect grace and mercy periods. In other words, any time consumed by
shutdown fairings is not added to grace and mercy periods.</p>
<p><em><strong>Note: Shutdown fairings are only run during testing if the <code>Client</code>
is terminated using <a href="../local/blocking/struct.Client.html#method.terminate"><code>Client::terminate()</code></a>.</strong></em></p>
</li>
</ul>
<h2 id="singletons"><a href="#singletons">Singletons</a></h2>
<p>In general, any number of instances of a given fairing type can be attached
to one instance of <code>Rocket</code>. If this is not desired, a fairing can request
to be a singleton by specifying <a href="struct.Kind.html#associatedconstant.Singleton" title="Kind::Singleton"><code>Kind::Singleton</code></a>. Only the <em>last</em>
attached instance of a singleton will be preserved at ignite-time. That is,
an attached singleton instance will replace any previously attached
instance. The <a href="../shield/struct.Shield.html"><code>Shield</code></a> fairing is an example of a
singleton fairing.</p>
<h2 id="implementing"><a href="#implementing">Implementing</a></h2>
<p>A <code>Fairing</code> implementation has one required method: <a href="trait.Fairing.html#tymethod.info"><code>info</code></a>. A <code>Fairing</code>
can also implement any of the available callbacks: <code>on_ignite</code>, <code>on_liftoff</code>,
<code>on_request</code>, and <code>on_response</code>. A <code>Fairing</code> <em>must</em> set the appropriate
callback kind in the <code>kind</code> field of the returned <code>Info</code> structure from
<a href="trait.Fairing.html#tymethod.info"><code>info</code></a> for a callback to actually be called by Rocket.</p>
<h3 id="fairing-info"><a href="#fairing-info">Fairing <code>Info</code></a></h3>
<p>Every <code>Fairing</code> must implement the <a href="trait.Fairing.html#tymethod.info"><code>info</code></a> method, which returns an
<a href="trait.Fairing.html#tymethod.info"><code>Info</code></a> structure. This structure is used by Rocket to:</p>
<ol>
<li>
<p>Assign a name to the <code>Fairing</code>.</p>
<p>This is the <code>name</code> field, which can be any arbitrary string. Name your
fairing something illustrative. The name will be logged during the
application’s ignition procedures.</p>
</li>
<li>
<p>Determine which callbacks to actually issue on the <code>Fairing</code>.</p>
<p>This is the <code>kind</code> field of type <a href="struct.Kind.html" title="Kind"><code>Kind</code></a>. This field is a bitset that
represents the kinds of callbacks the fairing wishes to receive. Rocket
will only invoke the callbacks that are flagged in this set. <code>Kind</code>
structures can be <code>or</code>d together to represent any combination of kinds
of callbacks. For instance, to request liftoff and response callbacks,
return a <code>kind</code> field with the value <code>Kind::Liftoff | Kind::Response</code>.</p>
</li>
</ol>
<h3 id="restrictions"><a href="#restrictions">Restrictions</a></h3>
<p>A <code>Fairing</code> must be <a href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="Send"><code>Send</code></a> + <a href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="Sync"><code>Sync</code></a> + <code>'static</code>. This means that the
fairing must be sendable across thread boundaries (<code>Send</code>), thread-safe
(<code>Sync</code>), and have only <code>'static</code> references, if any (<code>'static</code>). Note that
these bounds <em>do not</em> prohibit a <code>Fairing</code> from holding state: the state
need simply be thread-safe and statically available or heap allocated.</p>
<h3 id="async-trait"><a href="#async-trait">Async Trait</a></h3>
<p><a href="trait.Fairing.html" title="Fairing"><code>Fairing</code></a> is an <em>async</em> trait. Implementations of <code>Fairing</code> must be
decorated with an attribute of <code>#[rocket::async_trait]</code>:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>rocket::{Rocket, Request, Data, Response, Build, Orbit};
<span class="kw">use </span>rocket::fairing::{<span class="self">self</span>, Fairing, Info, Kind};

<span class="attr">#[rocket::async_trait]
</span><span class="kw">impl </span>Fairing <span class="kw">for </span>MyType {
    <span class="kw">fn </span>info(<span class="kw-2">&amp;</span><span class="self">self</span>) -&gt; Info {
        <span class="comment">/* ... */
    </span>}

    <span class="kw">async fn </span>on_ignite(<span class="kw-2">&amp;</span><span class="self">self</span>, rocket: Rocket&lt;Build&gt;) -&gt; fairing::Result {
        <span class="comment">/* ... */
    </span>}

    <span class="kw">async fn </span>on_liftoff(<span class="kw-2">&amp;</span><span class="self">self</span>, rocket: <span class="kw-2">&amp;</span>Rocket&lt;Orbit&gt;) {
        <span class="comment">/* ... */
    </span>}

    <span class="kw">async fn </span>on_request(<span class="kw-2">&amp;</span><span class="self">self</span>, req: <span class="kw-2">&amp;mut </span>Request&lt;<span class="lifetime">&#39;_</span>&gt;, data: <span class="kw-2">&amp;mut </span>Data&lt;<span class="lifetime">&#39;_</span>&gt;) {
        <span class="comment">/* ... */
    </span>}

    <span class="kw">async fn </span>on_response&lt;<span class="lifetime">&#39;r</span>&gt;(<span class="kw-2">&amp;</span><span class="self">self</span>, req: <span class="kw-2">&amp;</span><span class="lifetime">&#39;r </span>Request&lt;<span class="lifetime">&#39;_</span>&gt;, res: <span class="kw-2">&amp;mut </span>Response&lt;<span class="lifetime">&#39;r</span>&gt;) {
        <span class="comment">/* ... */
    </span>}

    <span class="kw">async fn </span>on_shutdown(<span class="kw-2">&amp;</span><span class="self">self</span>, rocket: <span class="kw-2">&amp;</span>Rocket&lt;Orbit&gt;) {
        <span class="comment">/* ... */
    </span>}
}</code></pre></div>
<h3 id="example"><a href="#example">Example</a></h3>
<p>As an example, we want to record the number of <code>GET</code> and <code>POST</code> requests
that our application has received. While we could do this with <a href="../request/trait.FromRequest.html">request
guards</a> and <a href="../struct.State.html">managed state</a>, it would require us to annotate
every <code>GET</code> and <code>POST</code> request with custom types, polluting handler
signatures. Instead, we can create a simple fairing that acts globally.</p>
<p>The <code>Counter</code> fairing below records the number of all <code>GET</code> and <code>POST</code>
requests received. It makes these counts available at a special <code>'/counts'</code>
path.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::future::Future;
<span class="kw">use </span>std::io::Cursor;
<span class="kw">use </span>std::pin::Pin;
<span class="kw">use </span>std::sync::atomic::{AtomicUsize, Ordering};

<span class="kw">use </span>rocket::{Request, Data, Response};
<span class="kw">use </span>rocket::fairing::{Fairing, Info, Kind};
<span class="kw">use </span>rocket::http::{Method, ContentType, Status};

<span class="attr">#[derive(Default)]
</span><span class="kw">struct </span>Counter {
    get: AtomicUsize,
    post: AtomicUsize,
}

<span class="attr">#[rocket::async_trait]
</span><span class="kw">impl </span>Fairing <span class="kw">for </span>Counter {
    <span class="kw">fn </span>info(<span class="kw-2">&amp;</span><span class="self">self</span>) -&gt; Info {
        Info {
            name: <span class="string">&quot;GET/POST Counter&quot;</span>,
            kind: Kind::Request | Kind::Response
        }
    }

    <span class="kw">async fn </span>on_request(<span class="kw-2">&amp;</span><span class="self">self</span>, req: <span class="kw-2">&amp;mut </span>Request&lt;<span class="lifetime">&#39;_</span>&gt;, <span class="kw">_</span>: <span class="kw-2">&amp;mut </span>Data&lt;<span class="lifetime">&#39;_</span>&gt;) {
        <span class="kw">if </span>req.method() == Method::Get {
            <span class="self">self</span>.get.fetch_add(<span class="number">1</span>, Ordering::Relaxed);
        } <span class="kw">else if </span>req.method() == Method::Post {
            <span class="self">self</span>.post.fetch_add(<span class="number">1</span>, Ordering::Relaxed);
        }
    }

    <span class="kw">async fn </span>on_response&lt;<span class="lifetime">&#39;r</span>&gt;(<span class="kw-2">&amp;</span><span class="self">self</span>, req: <span class="kw-2">&amp;</span><span class="lifetime">&#39;r </span>Request&lt;<span class="lifetime">&#39;_</span>&gt;, res: <span class="kw-2">&amp;mut </span>Response&lt;<span class="lifetime">&#39;r</span>&gt;) {
        <span class="comment">// Don&#39;t change a successful user&#39;s response, ever.
        </span><span class="kw">if </span>res.status() != Status::NotFound {
            <span class="kw">return
        </span>}

        <span class="kw">if </span>req.method() == Method::Get &amp;&amp; req.uri().path() == <span class="string">&quot;/counts&quot; </span>{
            <span class="kw">let </span>get_count = <span class="self">self</span>.get.load(Ordering::Relaxed);
            <span class="kw">let </span>post_count = <span class="self">self</span>.post.load(Ordering::Relaxed);

            <span class="kw">let </span>body = <span class="macro">format!</span>(<span class="string">&quot;Get: {}\nPost: {}&quot;</span>, get_count, post_count);
            res.set_status(Status::Ok);
            res.set_header(ContentType::Plain);
            res.set_sized_body(body.len(), Cursor::new(body));
        }
    }
}</code></pre></div>
<h3 id="request-local-state"><a href="#request-local-state">Request-Local State</a></h3>
<p>Fairings can use <a href="https://rocket.rs/v0.5-rc/guide/state/#request-local-state">request-local state</a> to persist or carry data between
requests and responses, or to pass data to a request guard.</p>
<p>As an example, the following fairing uses request-local state to time
requests, setting an <code>X-Response-Time</code> header on all responses with the
elapsed time. It also exposes the start time of a request via a <code>StartTime</code>
request guard.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="doccomment">/// Fairing for timing requests.
</span><span class="kw">pub struct </span>RequestTimer;

<span class="doccomment">/// Value stored in request-local state.
</span><span class="attr">#[derive(Copy, Clone)]
</span><span class="kw">struct </span>TimerStart(<span class="prelude-ty">Option</span>&lt;SystemTime&gt;);

<span class="attr">#[rocket::async_trait]
</span><span class="kw">impl </span>Fairing <span class="kw">for </span>RequestTimer {
    <span class="kw">fn </span>info(<span class="kw-2">&amp;</span><span class="self">self</span>) -&gt; Info {
        Info {
            name: <span class="string">&quot;Request Timer&quot;</span>,
            kind: Kind::Request | Kind::Response
        }
    }

    <span class="doccomment">/// Stores the start time of the request in request-local state.
    </span><span class="kw">async fn </span>on_request(<span class="kw-2">&amp;</span><span class="self">self</span>, request: <span class="kw-2">&amp;mut </span>Request&lt;<span class="lifetime">&#39;_</span>&gt;, <span class="kw">_</span>: <span class="kw-2">&amp;mut </span>Data&lt;<span class="lifetime">&#39;_</span>&gt;) {
        <span class="comment">// Store a `TimerStart` instead of directly storing a `SystemTime`
        // to ensure that this usage doesn&#39;t conflict with anything else
        // that might store a `SystemTime` in request-local cache.
        </span>request.local_cache(|| TimerStart(<span class="prelude-val">Some</span>(SystemTime::now())));
    }

    <span class="doccomment">/// Adds a header to the response indicating how long the server took to
    /// process the request.
    </span><span class="kw">async fn </span>on_response&lt;<span class="lifetime">&#39;r</span>&gt;(<span class="kw-2">&amp;</span><span class="self">self</span>, req: <span class="kw-2">&amp;</span><span class="lifetime">&#39;r </span>Request&lt;<span class="lifetime">&#39;_</span>&gt;, res: <span class="kw-2">&amp;mut </span>Response&lt;<span class="lifetime">&#39;r</span>&gt;) {
        <span class="kw">let </span>start_time = req.local_cache(|| TimerStart(<span class="prelude-val">None</span>));
        <span class="kw">if let </span><span class="prelude-val">Some</span>(<span class="prelude-val">Ok</span>(duration)) = start_time.<span class="number">0</span>.map(|st| st.elapsed()) {
            <span class="kw">let </span>ms = duration.as_secs() * <span class="number">1000 </span>+ duration.subsec_millis() <span class="kw">as </span>u64;
            res.set_raw_header(<span class="string">&quot;X-Response-Time&quot;</span>, <span class="macro">format!</span>(<span class="string">&quot;{} ms&quot;</span>, ms));
        }
    }
}

<span class="doccomment">/// Request guard used to retrieve the start time of a request.
</span><span class="attr">#[derive(Copy, Clone)]
</span><span class="kw">pub struct </span>StartTime(<span class="kw">pub </span>SystemTime);

<span class="comment">// Allows a route to access the time a request was initiated.
</span><span class="attr">#[rocket::async_trait]
</span><span class="kw">impl</span>&lt;<span class="lifetime">&#39;r</span>&gt; FromRequest&lt;<span class="lifetime">&#39;r</span>&gt; <span class="kw">for </span>StartTime {
    <span class="kw">type </span>Error = ();

    <span class="kw">async fn </span>from_request(request: <span class="kw-2">&amp;</span><span class="lifetime">&#39;r </span>Request&lt;<span class="lifetime">&#39;_</span>&gt;) -&gt; request::Outcome&lt;<span class="self">Self</span>, ()&gt; {
        <span class="kw">match </span><span class="kw-2">*</span>request.local_cache(|| TimerStart(<span class="prelude-val">None</span>)) {
            TimerStart(<span class="prelude-val">Some</span>(time)) =&gt; request::Outcome::Success(StartTime(time)),
            TimerStart(<span class="prelude-val">None</span>) =&gt; request::Outcome::Failure((Status::InternalServerError, ())),
        }
    }
}</code></pre></div>
</div></details><h2 id="required-methods" class="small-section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.info" class="method has-srclink"><a class="srclink rightside" href="../../src/rocket/fairing/mod.rs.html#462">source</a><h4 class="code-header">fn <a href="#tymethod.info" class="fn">info</a>(&amp;self) -&gt; <a class="struct" href="struct.Info.html" title="struct rocket::fairing::Info">Info</a></h4></section></summary><div class="docblock"><p>Returns an <a href="struct.Info.html" title="Info"><code>Info</code></a> structure containing the <code>name</code> and <a href="struct.Kind.html" title="Kind"><code>Kind</code></a> of this
fairing. The <code>name</code> can be any arbitrary string. <code>Kind</code> must be an <code>or</code>d
set of <code>Kind</code> variants.</p>
<p>This is the only required method of a <code>Fairing</code>. All other methods have
no-op default implementations.</p>
<p>Rocket will only dispatch callbacks to this fairing for the kinds in the
<code>kind</code> field of the returned <code>Info</code> structure. For instance, if
<code>Kind::Ignite | Kind::Request</code> is used, then Rocket will only call the
<code>on_ignite</code> and <code>on_request</code> methods of the fairing. Similarly, if
<code>Kind::Response</code> is used, Rocket will only call the <code>on_response</code> method
of this fairing.</p>
<h5 id="example-1"><a href="#example-1">Example</a></h5>
<p>An <code>info</code> implementation for <code>MyFairing</code>: a fairing named “My Custom
Fairing” that is both an ignite and response fairing.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>rocket::fairing::{Fairing, Info, Kind};

<span class="kw">struct </span>MyFairing;

<span class="kw">impl </span>Fairing <span class="kw">for </span>MyFairing {
    <span class="kw">fn </span>info(<span class="kw-2">&amp;</span><span class="self">self</span>) -&gt; Info {
        Info {
            name: <span class="string">&quot;My Custom Fairing&quot;</span>,
            kind: Kind::Ignite | Kind::Response
        }
    }
}</code></pre></div>
</div></details></div><h2 id="provided-methods" class="small-section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.on_ignite" class="method has-srclink"><a class="srclink rightside" href="../../src/rocket/fairing/mod.rs.html#477">source</a><h4 class="code-header">fn <a href="#method.on_ignite" class="fn">on_ignite</a>&lt;'life0, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self,<br>&nbsp;&nbsp;&nbsp;&nbsp;rocket: <a class="struct" href="../struct.Rocket.html" title="struct rocket::Rocket">Rocket</a>&lt;<a class="enum" href="../enum.Build.html" title="enum rocket::Build">Build</a>&gt;<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="type" href="type.Result.html" title="type rocket::fairing::Result">Result</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,</span></h4></section></summary><div class="docblock"><p>The ignite callback. Returns <code>Ok</code> if ignition should proceed and <code>Err</code>
if ignition and launch should be aborted.</p>
<p>See <a href="#ignite">Fairing Callbacks</a> for complete semantics.</p>
<p>This method is called during ignition and if <code>Kind::Ignite</code> is in the
<code>kind</code> field of the <code>Info</code> structure for this fairing. The <code>rocket</code>
parameter is the <code>Rocket</code> instance that is currently being built for
this application.</p>
<h6 id="default-implementation"><a href="#default-implementation">Default Implementation</a></h6>
<p>The default implementation of this method simply returns <code>Ok(rocket)</code>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.on_liftoff" class="method has-srclink"><a class="srclink rightside" href="../../src/rocket/fairing/mod.rs.html#490">source</a><h4 class="code-header">fn <a href="#method.on_liftoff" class="fn">on_liftoff</a>&lt;'life0, 'life1, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self,<br>&nbsp;&nbsp;&nbsp;&nbsp;_rocket: &amp;'life1 <a class="struct" href="../struct.Rocket.html" title="struct rocket::Rocket">Rocket</a>&lt;<a class="enum" href="../enum.Orbit.html" title="enum rocket::Orbit">Orbit</a>&gt;<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life1: 'async_trait,</span></h4></section></summary><div class="docblock"><p>The liftoff callback.</p>
<p>See <a href="#liftoff">Fairing Callbacks</a> for complete semantics.</p>
<p>This method is called just after launching the application if
<code>Kind::Liftoff</code> is in the <code>kind</code> field of the <code>Info</code> structure for this
fairing. The <code>Rocket</code> parameter corresponds to the lauched application.</p>
<h6 id="default-implementation-1"><a href="#default-implementation-1">Default Implementation</a></h6>
<p>The default implementation of this method does nothing.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.on_request" class="method has-srclink"><a class="srclink rightside" href="../../src/rocket/fairing/mod.rs.html#504">source</a><h4 class="code-header">fn <a href="#method.on_request" class="fn">on_request</a>&lt;'life0, 'life1, 'life2, 'life3, 'life4, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self,<br>&nbsp;&nbsp;&nbsp;&nbsp;_req: &amp;'life1 mut <a class="struct" href="../request/struct.Request.html" title="struct rocket::request::Request">Request</a>&lt;'life2&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;_data: &amp;'life3 mut <a class="struct" href="../data/struct.Data.html" title="struct rocket::data::Data">Data</a>&lt;'life4&gt;<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life1: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life2: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life3: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life4: 'async_trait,</span></h4></section></summary><div class="docblock"><p>The request callback.</p>
<p>See <a href="#request">Fairing Callbacks</a> for complete semantics.</p>
<p>This method is called when a new request is received if <code>Kind::Request</code>
is in the <code>kind</code> field of the <code>Info</code> structure for this fairing. The
<code>&amp;mut Request</code> parameter is the incoming request, and the <code>&amp;Data</code>
parameter is the incoming data in the request.</p>
<h6 id="default-implementation-2"><a href="#default-implementation-2">Default Implementation</a></h6>
<p>The default implementation of this method does nothing.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.on_response" class="method has-srclink"><a class="srclink rightside" href="../../src/rocket/fairing/mod.rs.html#518">source</a><h4 class="code-header">fn <a href="#method.on_response" class="fn">on_response</a>&lt;'r, 'life0, 'life1, 'life2, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self,<br>&nbsp;&nbsp;&nbsp;&nbsp;_req: &amp;'r <a class="struct" href="../request/struct.Request.html" title="struct rocket::request::Request">Request</a>&lt;'life1&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;_res: &amp;'life2 mut <a class="struct" href="../response/struct.Response.html" title="struct rocket::response::Response">Response</a>&lt;'r&gt;<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'r: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life1: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life2: 'async_trait,</span></h4></section></summary><div class="docblock"><p>The response callback.</p>
<p>See <a href="#response">Fairing Callbacks</a> for complete semantics.</p>
<p>This method is called when a response is ready to be issued to a client
if <code>Kind::Response</code> is in the <code>kind</code> field of the <code>Info</code> structure for
this fairing. The <code>&amp;Request</code> parameter is the request that was routed,
and the <code>&amp;mut Response</code> parameter is the resulting response.</p>
<h6 id="default-implementation-3"><a href="#default-implementation-3">Default Implementation</a></h6>
<p>The default implementation of this method does nothing.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.on_shutdown" class="method has-srclink"><a class="srclink rightside" href="../../src/rocket/fairing/mod.rs.html#533">source</a><h4 class="code-header">fn <a href="#method.on_shutdown" class="fn">on_shutdown</a>&lt;'life0, 'life1, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self,<br>&nbsp;&nbsp;&nbsp;&nbsp;_rocket: &amp;'life1 <a class="struct" href="../struct.Rocket.html" title="struct rocket::Rocket">Rocket</a>&lt;<a class="enum" href="../enum.Orbit.html" title="enum rocket::Orbit">Orbit</a>&gt;<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life1: 'async_trait,</span></h4></section></summary><div class="docblock"><p>The shutdown callback.</p>
<p>See <a href="#shutdown">Fairing Callbacks</a> for complete semantics.</p>
<p>This method is called when <a href="../config/struct.Shutdown.html#triggers">shutdown is triggered</a> if <code>Kind::Shutdown</code>
is in the <code>kind</code> field of the <code>Info</code> structure for this fairing. The
<code>Rocket</code> parameter corresponds to the running application.</p>
<h6 id="default-implementation-4"><a href="#default-implementation-4">Default Implementation</a></h6>
<p>The default implementation of this method does nothing.</p>
</div></details></div><h2 id="foreign-impls" class="small-section-header">Implementations on Foreign Types<a href="#foreign-impls" class="anchor">§</a></h2><details class="toggle implementors-toggle"><summary><section id="impl-Fairing-for-Arc%3CT%3E" class="impl has-srclink"><a class="srclink rightside" href="../../src/rocket/fairing/mod.rs.html#537-567">source</a><a href="#impl-Fairing-for-Arc%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T:&nbsp;<a class="trait" href="trait.Fairing.html" title="trait rocket::fairing::Fairing">Fairing</a>&gt; <a class="trait" href="trait.Fairing.html" title="trait rocket::fairing::Fairing">Fairing</a> for <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/sync/struct.Arc.html" title="struct alloc::sync::Arc">Arc</a>&lt;T&gt;</h3></section></summary><div class="impl-items"><section id="method.info" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../src/rocket/fairing/mod.rs.html#539-541">source</a><a href="#method.info" class="anchor">§</a><h4 class="code-header">fn <a href="#tymethod.info" class="fn">info</a>(&amp;self) -&gt; <a class="struct" href="struct.Info.html" title="struct rocket::fairing::Info">Info</a></h4></section><section id="method.on_ignite-1" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../src/rocket/fairing/mod.rs.html#544-546">source</a><a href="#method.on_ignite-1" class="anchor">§</a><h4 class="code-header">fn <a href="#method.on_ignite" class="fn">on_ignite</a>&lt;'life0, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self,<br>&nbsp;&nbsp;&nbsp;&nbsp;rocket: <a class="struct" href="../struct.Rocket.html" title="struct rocket::Rocket">Rocket</a>&lt;<a class="enum" href="../enum.Build.html" title="enum rocket::Build">Build</a>&gt;<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="type" href="type.Result.html" title="type rocket::fairing::Result">Result</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,</span></h4></section><section id="method.on_liftoff-1" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../src/rocket/fairing/mod.rs.html#549-551">source</a><a href="#method.on_liftoff-1" class="anchor">§</a><h4 class="code-header">fn <a href="#method.on_liftoff" class="fn">on_liftoff</a>&lt;'life0, 'life1, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self,<br>&nbsp;&nbsp;&nbsp;&nbsp;rocket: &amp;'life1 <a class="struct" href="../struct.Rocket.html" title="struct rocket::Rocket">Rocket</a>&lt;<a class="enum" href="../enum.Orbit.html" title="enum rocket::Orbit">Orbit</a>&gt;<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life1: 'async_trait,</span></h4></section><section id="method.on_request-1" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../src/rocket/fairing/mod.rs.html#554-556">source</a><a href="#method.on_request-1" class="anchor">§</a><h4 class="code-header">fn <a href="#method.on_request" class="fn">on_request</a>&lt;'life0, 'life1, 'life2, 'life3, 'life4, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self,<br>&nbsp;&nbsp;&nbsp;&nbsp;req: &amp;'life1 mut <a class="struct" href="../request/struct.Request.html" title="struct rocket::request::Request">Request</a>&lt;'life2&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;data: &amp;'life3 mut <a class="struct" href="../data/struct.Data.html" title="struct rocket::data::Data">Data</a>&lt;'life4&gt;<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life1: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life2: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life3: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life4: 'async_trait,</span></h4></section><section id="method.on_response-1" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../src/rocket/fairing/mod.rs.html#559-561">source</a><a href="#method.on_response-1" class="anchor">§</a><h4 class="code-header">fn <a href="#method.on_response" class="fn">on_response</a>&lt;'r, 'life0, 'life1, 'life2, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self,<br>&nbsp;&nbsp;&nbsp;&nbsp;req: &amp;'r <a class="struct" href="../request/struct.Request.html" title="struct rocket::request::Request">Request</a>&lt;'life1&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;res: &amp;'life2 mut <a class="struct" href="../response/struct.Response.html" title="struct rocket::response::Response">Response</a>&lt;'r&gt;<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'r: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life1: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life2: 'async_trait,</span></h4></section><section id="method.on_shutdown-1" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../src/rocket/fairing/mod.rs.html#564-566">source</a><a href="#method.on_shutdown-1" class="anchor">§</a><h4 class="code-header">fn <a href="#method.on_shutdown" class="fn">on_shutdown</a>&lt;'life0, 'life1, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self,<br>&nbsp;&nbsp;&nbsp;&nbsp;rocket: &amp;'life1 <a class="struct" href="../struct.Rocket.html" title="struct rocket::Rocket">Rocket</a>&lt;<a class="enum" href="../enum.Orbit.html" title="enum rocket::Orbit">Orbit</a>&gt;<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life1: 'async_trait,</span></h4></section></div></details><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><section id="impl-Fairing-for-Shield" class="impl has-srclink"><a class="srclink rightside" href="../../src/rocket/shield/shield.rs.html#192-237">source</a><a href="#impl-Fairing-for-Shield" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.Fairing.html" title="trait rocket::fairing::Fairing">Fairing</a> for <a class="struct" href="../shield/struct.Shield.html" title="struct rocket::shield::Shield">Shield</a></h3></section><section id="impl-Fairing-for-AdHoc" class="impl has-srclink"><a class="srclink rightside" href="../../src/rocket/fairing/ad_hoc.rs.html#249-292">source</a><a href="#impl-Fairing-for-AdHoc" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.Fairing.html" title="trait rocket::fairing::Fairing">Fairing</a> for <a class="struct" href="struct.AdHoc.html" title="struct rocket::fairing::AdHoc">AdHoc</a></h3></section></div><script src="../../implementors/rocket/fairing/trait.Fairing.js" data-ignore-extern-crates="alloc" async></script></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="rocket" data-themes="" data-resource-suffix="" data-rustdoc-version="1.69.0-nightly (c18a5e8a5 2023-01-25)" data-search-js="search-98d53477a794af0b.js" data-settings-js="settings-a43118d2dfb2799d.js" data-settings-css="settings-7c23ac01f615ce90.css" ></div></body></html>