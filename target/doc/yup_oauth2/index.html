<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This library can be used to acquire oauth2.0 authentication for services."><meta name="keywords" content="rust, rustlang, rust-lang, yup_oauth2"><title>yup_oauth2 - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-6d262342be62306e.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../static.files/light-5f7299aa2b503fb1.css"><link rel="stylesheet" disabled href="../static.files/dark-dfb18ef8114bb428.css"><link rel="stylesheet" disabled href="../static.files/ayu-4047a6aaddd3789d.css"><script id="default-settings" ></script><script src="../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-3367e395607fafc1.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../yup_oauth2/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../yup_oauth2/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Crate yup_oauth2</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 8.1.0</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">yup_oauth2</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/yup_oauth2/lib.rs.html#1-115">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This library can be used to acquire oauth2.0 authentication for services.</p>
<p>For your application to use this library, you will have to obtain an application
id and secret by
<a href="https://developers.google.com/youtube/registering_an_application">following this guide</a> (for
Google services) respectively the documentation of the API provider you want to connect to.</p>
<h2 id="device-flow-usage"><a href="#device-flow-usage">Device Flow Usage</a></h2>
<p>With an application secret you can get started right away, building a <code>DeviceFlowAuthenticator</code>
and obtaining tokens from it.</p>
<h2 id="service-account-flow"><a href="#service-account-flow">Service account “flow”</a></h2>
<p>When using service account credentials, no user interaction is required. The access token
can be obtained automatically using the private key of the client (which you can download
from the API provider). See <code>examples/service_account/</code> for an example on how to use service
account credentials. See
<a href="https://developers.google.com/identity/protocols/OAuth2ServiceAccount">developers.google.com</a>
for a detailed description of the protocol. This crate implements OAuth for Service Accounts
based on the Google APIs; it may or may not work with other providers.</p>
<h2 id="installed-flow-usage"><a href="#installed-flow-usage">Installed Flow Usage</a></h2>
<p>The installed flow involves showing a URL to the user (or opening it in a browser)
and then either prompting the user to enter a displayed code, or make the authorizing
website redirect to a web server spun up by this library and running on localhost.</p>
<p>In order to use the interactive method, use the <code>Interactive</code> <code>InstalledFlowReturnMethod</code>;
for the redirect method, use <code>HTTPRedirect</code>.</p>
<p>You can implement your own <code>AuthenticatorDelegate</code> in order to customize the flow;
the installed flow uses the <code>present_user_url</code> method.</p>
<p>The returned <code>Token</code> will be stored in memory in order to authorize future
API requests to the same scopes. The tokens can optionally be persisted to
disk by using <code>persist_tokens_to_disk</code> when creating the authenticator.</p>
<p>The following example, which is derived from the (actual and runnable) example in
<code>examples/test-installed/</code>, shows the basics of using this crate:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>yup_oauth2::{InstalledFlowAuthenticator, InstalledFlowReturnMethod};

<span class="attr">#[tokio::main]
</span><span class="kw">async fn </span>main() {
    <span class="comment">// Read application secret from a file. Sometimes it&#39;s easier to compile it directly into
    // the binary. The clientsecret file contains JSON like `{&quot;installed&quot;:{&quot;client_id&quot;: ... }}`
    </span><span class="kw">let </span>secret = yup_oauth2::read_application_secret(<span class="string">&quot;clientsecret.json&quot;</span>)
        .<span class="kw">await
        </span>.expect(<span class="string">&quot;clientsecret.json&quot;</span>);

    <span class="comment">// Create an authenticator that uses an InstalledFlow to authenticate. The
    // authentication tokens are persisted to a file named tokencache.json. The
    // authenticator takes care of caching tokens to disk and refreshing tokens once
    // they&#39;ve expired.
    </span><span class="kw">let </span><span class="kw-2">mut </span>auth = InstalledFlowAuthenticator::builder(secret, InstalledFlowReturnMethod::HTTPRedirect)
    .persist_tokens_to_disk(<span class="string">&quot;tokencache.json&quot;</span>)
    .build()
    .<span class="kw">await
    </span>.unwrap();

    <span class="kw">let </span>scopes = <span class="kw-2">&amp;</span>[<span class="string">&quot;https://www.googleapis.com/auth/drive.file&quot;</span>];

    <span class="comment">// token(&lt;scopes&gt;) is the one important function of this crate; it does everything to
    // obtain a token that can be sent e.g. as Bearer token.
    </span><span class="kw">match </span>auth.token(scopes).<span class="kw">await </span>{
        <span class="prelude-val">Ok</span>(token) =&gt; <span class="macro">println!</span>(<span class="string">&quot;The token is {:?}&quot;</span>, token),
        <span class="prelude-val">Err</span>(e) =&gt; <span class="macro">println!</span>(<span class="string">&quot;error: {:?}&quot;</span>, e),
    }
}</code></pre></div>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="access_token/index.html" title="yup_oauth2::access_token mod">access_token</a></div><div class="item-right docblock-short">pseudo authenticator for use with plain access tokens.
If you use a specialized service to manage your
OAuth2-tokens you may get just the fresh generated
access token from your service.
The intention behind this is that if two services using the
same refresh token then each service will invalitate the
access token of the other service by generating a new token.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="authenticator/index.html" title="yup_oauth2::authenticator mod">authenticator</a></div><div class="item-right docblock-short">Module containing the core functionality for OAuth2 Authentication.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="authenticator_delegate/index.html" title="yup_oauth2::authenticator_delegate mod">authenticator_delegate</a></div><div class="item-right docblock-short">Module containing types related to delegates.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="authorized_user/index.html" title="yup_oauth2::authorized_user mod">authorized_user</a></div><div class="item-right docblock-short">This module provides a token source (<code>GetToken</code>) that obtains tokens using user credentials
for use by software (i.e., non-human actors) to get access to Google services.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="error/index.html" title="yup_oauth2::error mod">error</a></div><div class="item-right docblock-short">Module containing various error types.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="service_account_impersonator/index.html" title="yup_oauth2::service_account_impersonator mod">service_account_impersonator</a></div><div class="item-right docblock-short">This module provides an authenticator that uses authorized user secrets
to generate impersonated service account tokens.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="storage/index.html" title="yup_oauth2::storage mod">storage</a></div><div class="item-right docblock-short">Interface for storing tokens so that they can be re-used. There are built-in memory and
file-based storage providers. You can implement your own by implementing the TokenStorage trait.</div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.AccessToken.html" title="yup_oauth2::AccessToken struct">AccessToken</a></div><div class="item-right docblock-short">Represents a token returned by oauth2 servers. All tokens are Bearer tokens. Other types of
tokens are not supported.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.AccessTokenAuthenticator.html" title="yup_oauth2::AccessTokenAuthenticator struct">AccessTokenAuthenticator</a></div><div class="item-right docblock-short">Create a access token authenticator for use with pre-generated
access tokens</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ApplicationDefaultCredentialsAuthenticator.html" title="yup_oauth2::ApplicationDefaultCredentialsAuthenticator struct">ApplicationDefaultCredentialsAuthenticator</a></div><div class="item-right docblock-short">Create an authenticator that uses a application default credentials.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ApplicationDefaultCredentialsFlowOpts.html" title="yup_oauth2::ApplicationDefaultCredentialsFlowOpts struct">ApplicationDefaultCredentialsFlowOpts</a></div><div class="item-right docblock-short">Provide options for the Application Default Credential Flow, mostly used for testing</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ApplicationSecret.html" title="yup_oauth2::ApplicationSecret struct">ApplicationSecret</a></div><div class="item-right docblock-short">Represents either ‘installed’ or ‘web’ applications in a json secrets file.
See <code>ConsoleApplicationSecret</code> for more information</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.AuthorizedUserAuthenticator.html" title="yup_oauth2::AuthorizedUserAuthenticator struct">AuthorizedUserAuthenticator</a></div><div class="item-right docblock-short">Create an authenticator that uses an authorized user credentials.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ConsoleApplicationSecret.html" title="yup_oauth2::ConsoleApplicationSecret struct">ConsoleApplicationSecret</a></div><div class="item-right docblock-short">A type to facilitate reading and writing the json secret file
as returned by the <a href="https://code.google.com/apis/console">google developer console</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.DeviceFlowAuthenticator.html" title="yup_oauth2::DeviceFlowAuthenticator struct">DeviceFlowAuthenticator</a></div><div class="item-right docblock-short">Create an authenticator that uses the device flow.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.InstalledFlowAuthenticator.html" title="yup_oauth2::InstalledFlowAuthenticator struct">InstalledFlowAuthenticator</a></div><div class="item-right docblock-short">Create an authenticator that uses the installed flow.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ServiceAccountAuthenticator.html" title="yup_oauth2::ServiceAccountAuthenticator struct">ServiceAccountAuthenticator</a></div><div class="item-right docblock-short">Create an authenticator that uses a service account.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ServiceAccountImpersonationAuthenticator.html" title="yup_oauth2::ServiceAccountImpersonationAuthenticator struct">ServiceAccountImpersonationAuthenticator</a></div><div class="item-right docblock-short">Create a access token authenticator that uses user secrets to impersonate
a service account.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ServiceAccountKey.html" title="yup_oauth2::ServiceAccountKey struct">ServiceAccountKey</a></div><div class="item-right docblock-short">JSON schema of secret service account key.</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.Error.html" title="yup_oauth2::Error enum">Error</a></div><div class="item-right docblock-short">Encapsulates all possible results of the <code>token(...)</code> operation</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.InstalledFlowReturnMethod.html" title="yup_oauth2::InstalledFlowReturnMethod enum">InstalledFlowReturnMethod</a></div><div class="item-right docblock-short">Method by which the user agent return token to this application.</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.parse_application_secret.html" title="yup_oauth2::parse_application_secret fn">parse_application_secret</a></div><div class="item-right docblock-short">Read an application secret from a JSON string.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.parse_service_account_key.html" title="yup_oauth2::parse_service_account_key fn">parse_service_account_key</a></div><div class="item-right docblock-short">Read a service account key from a JSON string.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.read_application_secret.html" title="yup_oauth2::read_application_secret fn">read_application_secret</a></div><div class="item-right docblock-short">Read an application secret from a file.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.read_authorized_user_secret.html" title="yup_oauth2::read_authorized_user_secret fn">read_authorized_user_secret</a></div><div class="item-right docblock-short">Read an authorized user secret from a JSON file. You can obtain it by running on the client:
<code>gcloud auth application-default login</code>.
The file should be on Windows in: <code>%APPDATA%/gcloud/application_default_credentials.json</code>
for other systems: <code>$HOME/.config/gcloud/application_default_credentials.json</code>.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.read_service_account_key.html" title="yup_oauth2::read_service_account_key fn">read_service_account_key</a></div><div class="item-right docblock-short">Read a service account key from a JSON file. You can download the JSON keys from the Google
Cloud Console or the respective console of your service provider.</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="yup_oauth2" data-themes="" data-resource-suffix="" data-rustdoc-version="1.69.0-nightly (c18a5e8a5 2023-01-25)" data-search-js="search-98d53477a794af0b.js" data-settings-js="settings-a43118d2dfb2799d.js" data-settings-css="settings-7c23ac01f615ce90.css" ></div></body></html>