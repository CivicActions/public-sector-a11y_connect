<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Contains the `Op` type which describes the actions for an event."><meta name="keywords" content="rust, rustlang, rust-lang, op"><title>notify::op - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-6d262342be62306e.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../../static.files/light-5f7299aa2b503fb1.css"><link rel="stylesheet" disabled href="../../static.files/dark-dfb18ef8114bb428.css"><link rel="stylesheet" disabled href="../../static.files/ayu-4047a6aaddd3789d.css"><script id="default-settings" ></script><script src="../../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="../../static.files/main-3367e395607fafc1.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../notify/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../notify/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module op</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#constants">Constants</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">notify</a>::<wbr><a class="mod" href="#">op</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/notify/lib.rs.html#304">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Contains the <code>Op</code> type which describes the actions for an event.</p>
<p><code>notify</code> aims to provide unified behavior across platforms. This however is not always possible
due to the underlying technology of the various operating systems. So there are some issues
<code>notify</code>-API users will have to take care of themselves, depending on their needs.</p>
<h2 id="chmod"><a href="#chmod">Chmod</a></h2>
<p><strong>Linux, macOS</strong></p>
<p>On Linux and macOS the <code>CHMOD</code> event is emitted whenever attributes or extended attributes
change.</p>
<p><strong>Windows</strong></p>
<p>On Windows a <code>WRITE</code> event is emitted when attributes change. This makes it impossible to
distinguish between writes to a file or its meta data.</p>
<h2 id="close-write"><a href="#close-write">Close-Write</a></h2>
<p>A <code>CLOSE_WRITE</code> event is emitted whenever a file that was opened for writing has been closed.</p>
<p><strong>This event is only available on Linux</strong>.</p>
<h2 id="create"><a href="#create">Create</a></h2>
<p>A <code>CREATE</code> event is emitted whenever a new file or directory is created.</p>
<p>Upon receiving a <code>Create</code> event for a directory, it is necessary to scan the newly created
directory for contents. The directory can contain files or directories if those contents were
created before the directory could be watched, or if the directory was moved into the watched
directory.</p>
<h2 id="remove"><a href="#remove">Remove</a></h2><h3 id="remove-file-or-directory-within-a-watched-directory"><a href="#remove-file-or-directory-within-a-watched-directory">Remove file or directory within a watched directory</a></h3>
<p>A <code>REMOVE</code> event is emitted whenever a file or directory is removed.</p>
<h3 id="remove-watched-file-or-directory-itself"><a href="#remove-watched-file-or-directory-itself">Remove watched file or directory itself</a></h3>
<p>With the exception of Windows a <code>REMOVE</code> event is emitted whenever the watched file or
directory itself is removed. The behavior after the remove differs between platforms though.</p>
<p><strong>Linux</strong></p>
<p>When a watched file or directory is removed, its watch gets destroyed and no new events will be
sent.</p>
<p><strong>Windows</strong></p>
<p>If a watched directory is removed, an empty event is emitted.</p>
<p>When watching a single file on Windows, the file path will continue to be watched until either
the watch is removed by the API user or the parent directory gets removed.</p>
<p>When watching a directory on Windows, the watch will get destroyed and no new events will be
sent.</p>
<p><strong>macOS</strong></p>
<p>While Linux and Windows monitor “inodes”, macOS monitors “paths”. So a watch stays active even
after the watched file or directory has been removed and it will emit events in case a new file
or directory is created in its place.</p>
<h2 id="rename"><a href="#rename">Rename</a></h2>
<p>A <code>RENAME</code> event is emitted whenever a file or directory has been renamed or moved to a
different directory.</p>
<h3 id="rename-file-or-directory-within-a-watched-directory"><a href="#rename-file-or-directory-within-a-watched-directory">Rename file or directory within a watched directory</a></h3>
<p><strong>Linux, Windows</strong></p>
<p>A rename with both the source and the destination path inside a watched directory produces two
<code>RENAME</code> events. The first event contains the source path, the second contains the destination
path. Both events share the same cookie.</p>
<p>A rename that originates inside of a watched directory but ends outside of a watched directory
produces a <code>DELETE</code> event.</p>
<p>A rename that originates outside of a watched directory and ends inside of a watched directory
produces a <code>CREATE</code> event.</p>
<p><strong>macOS</strong></p>
<p>A <code>RENAME</code> event is produced whenever a file or directory is moved. This includes moves within
the watched directory as well as moves into or out of the watched directory. It is up to the
API user to determine what exactly happened. Usually when a move within a watched directory
occurs, the cookie is set for both connected events. This can however fail eg. if a file gets
renamed multiple times without a delay (test <code>fsevents_rename_rename_file_0</code>). So in some cases
rename cannot be caught properly but would be interpreted as a sequence of events where a file
or directory is moved out of the watched directory and a different file or directory is moved
in.</p>
<h3 id="rename-watched-file-or-directory-itself"><a href="#rename-watched-file-or-directory-itself">Rename watched file or directory itself</a></h3>
<p>With the exception of Windows a <code>RENAME</code> event is emitted whenever the watched file or
directory itself is renamed. The behavior after the rename differs between platforms though.
Depending on the platform either the moved file or directory will continue to be watched or the
old path. If the moved file or directory will continue to be watched, the paths of emitted
events will still be prefixed with the old path though.</p>
<p><strong>Linux</strong></p>
<p>Linux will continue to watch the moved file or directory. Events will contain paths prefixed
with the old path.</p>
<p><strong>Windows</strong></p>
<p>Currently there is no event emitted when a watched directory is renamed. But the directory will
continue to be watched and events will contain paths prefixed with the old path.</p>
<p>When renaming a watched file, a <code>RENAME</code> event is emitted but the old path will continue to be
watched.</p>
<p><strong>macOS</strong></p>
<p>macOS will continue to watch the (now non-existing) path.</p>
<h3 id="rename-parent-directory-of-watched-file-or-directory"><a href="#rename-parent-directory-of-watched-file-or-directory">Rename parent directory of watched file or directory</a></h3>
<p>Currently no event will be emitted when any parent directory of the watched file or directory
is renamed. Depending on the platform either the moved file or directory will continue to be
watched or the old path. If the moved file or directory will continue to be watched, the paths
of emitted events will still be prefixed with the old path though.</p>
<p><strong>Linux, Windows</strong></p>
<p>Linux and Windows will continue to watch the moved file or directory. Events will contain paths
prefixed with the old path.</p>
<p><strong>macOS</strong></p>
<p>macOS will continue to watch the (now non-existing) path.</p>
<h2 id="rescan"><a href="#rescan">Rescan</a></h2>
<p>A <code>RESCAN</code> event indicates that an error occurred and the watched directories need to be
rescanned. This can happen if the internal event queue has overflown and some events were
dropped. Or with FSEvents if events were coalesced hierarchically.</p>
<p><strong>Windows</strong></p>
<p>At the moment <code>RESCAN</code> events aren’t emitted on Windows.</p>
<p><strong>Queue size</strong></p>
<p>Linux: <code>/proc/sys/fs/inotify/max_queued_events</code></p>
<p>Windows: 16384 Bytes. The actual amount of events that fit into the queue depends on the length
of the paths.</p>
<h2 id="write"><a href="#write">Write</a></h2>
<p>A <code>WRITE</code> event is emitted whenever a file has been written to.</p>
<p><strong>Windows</strong></p>
<p>On Windows a <code>WRITE</code> event is emitted when attributes change.</p>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Op.html" title="notify::op::Op struct">Op</a></div><div class="item-right docblock-short">Holds a set of bit flags representing the actions for the event.</div></div></div><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.CHMOD.html" title="notify::op::CHMOD constant">CHMOD</a></div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.CLOSE_WRITE.html" title="notify::op::CLOSE_WRITE constant">CLOSE_WRITE</a></div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.CREATE.html" title="notify::op::CREATE constant">CREATE</a></div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.REMOVE.html" title="notify::op::REMOVE constant">REMOVE</a></div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.RENAME.html" title="notify::op::RENAME constant">RENAME</a></div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.RESCAN.html" title="notify::op::RESCAN constant">RESCAN</a></div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.WRITE.html" title="notify::op::WRITE constant">WRITE</a></div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="notify" data-themes="" data-resource-suffix="" data-rustdoc-version="1.69.0-nightly (c18a5e8a5 2023-01-25)" data-search-js="search-98d53477a794af0b.js" data-settings-js="settings-a43118d2dfb2799d.js" data-settings-css="settings-7c23ac01f615ce90.css" ></div></body></html>